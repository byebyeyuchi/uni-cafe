{"ast":null,"code":"import _objectSpread from \"/Users/yuqiliu/Desktop/jojo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { REGISTER_SUCCESS, REGISTER_FAIL, USER_LOADED, AUTH_ERROR, LOGIN_SUCCESS, LOGIN_FAIL, LOGOUT, CLEAR_ERRORS, SET_CURRENT_USER } from \"../type\";\nexport default (function (state, action) {\n  switch (action.type) {\n    case USER_LOADED:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isAuthenticated: true,\n        loading: false,\n        user: action.payload\n      });\n\n    case AUTH_ERROR:\n      localStorage.removeItem(\"token\");\n      return _objectSpread(_objectSpread({}, state), {}, {\n        token: null,\n        loading: false,\n        user: null,\n        error: action.payload\n      });\n\n    case REGISTER_SUCCESS:\n      localStorage.setItem(\"token\", action.payload.token);\n      return _objectSpread(_objectSpread(_objectSpread({}, state), action.payload), {}, {\n        // the token\n        isAuthenticated: true,\n        loading: false\n      });\n\n    case REGISTER_FAIL:\n      localStorage.removeItem(\"token\");\n      return _objectSpread(_objectSpread({}, state), {}, {\n        token: null,\n        loading: false,\n        user: null,\n        error: action.payload\n      });\n\n    case CLEAR_ERRORS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        error: null\n      });\n\n    case LOGIN_SUCCESS:\n      localStorage.setItem(\"token\", action.payload.token);\n      return _objectSpread(_objectSpread(_objectSpread({}, state), action.payload), {}, {\n        // the token\n        isAuthenticated: true,\n        loading: false\n      });\n\n    case LOGIN_FAIL:\n    case LOGOUT:\n      localStorage.removeItem(\"token\");\n      return _objectSpread(_objectSpread({}, state), {}, {\n        token: null,\n        isAuthenticated: false,\n        loading: false,\n        user: null,\n        error: action.payload\n      });\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["/Users/yuqiliu/Desktop/jojo/client/src/context/auth/authReducer.js"],"names":["REGISTER_SUCCESS","REGISTER_FAIL","USER_LOADED","AUTH_ERROR","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","CLEAR_ERRORS","SET_CURRENT_USER","state","action","type","isAuthenticated","loading","user","payload","localStorage","removeItem","token","error","setItem"],"mappings":";AAAA,SACIA,gBADJ,EAEIC,aAFJ,EAGIC,WAHJ,EAIIC,UAJJ,EAKIC,aALJ,EAMIC,UANJ,EAOIC,MAPJ,EAQIC,YARJ,EASIC,gBATJ,QAUQ,SAVR;AAYC,gBAAe,UAACC,KAAD,EAAQC,MAAR,EAAmB;AAC/B,UAAQA,MAAM,CAACC,IAAf;AAEG,SAAKT,WAAL;AACG,6CACMO,KADN;AAEGG,QAAAA,eAAe,EAAE,IAFpB;AAGGC,QAAAA,OAAO,EAAE,KAHZ;AAIGC,QAAAA,IAAI,EAAEJ,MAAM,CAACK;AAJhB;;AAOH,SAAKZ,UAAL;AACGa,MAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACA,6CACMR,KADN;AAEGS,QAAAA,KAAK,EAAE,IAFV;AAGGL,QAAAA,OAAO,EAAE,KAHZ;AAIGC,QAAAA,IAAI,EAAE,IAJT;AAKGK,QAAAA,KAAK,EAAET,MAAM,CAACK;AALjB;;AAQH,SAAKf,gBAAL;AACGgB,MAAAA,YAAY,CAACI,OAAb,CAAqB,OAArB,EAA8BV,MAAM,CAACK,OAAP,CAAeG,KAA7C;AACA,2DACMT,KADN,GAEMC,MAAM,CAACK,OAFb;AAEsB;AACnBH,QAAAA,eAAe,EAAE,IAHpB;AAIGC,QAAAA,OAAO,EAAE;AAJZ;;AAOH,SAAKZ,aAAL;AACGe,MAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACA,6CACMR,KADN;AAEGS,QAAAA,KAAK,EAAE,IAFV;AAGGL,QAAAA,OAAO,EAAE,KAHZ;AAIGC,QAAAA,IAAI,EAAE,IAJT;AAKGK,QAAAA,KAAK,EAAET,MAAM,CAACK;AALjB;;AAQH,SAAKR,YAAL;AACG,6CACME,KADN;AAEGU,QAAAA,KAAK,EAAE;AAFV;;AAKH,SAAKf,aAAL;AACGY,MAAAA,YAAY,CAACI,OAAb,CAAqB,OAArB,EAA8BV,MAAM,CAACK,OAAP,CAAeG,KAA7C;AACA,2DACMT,KADN,GAEMC,MAAM,CAACK,OAFb;AAEsB;AACnBH,QAAAA,eAAe,EAAE,IAHpB;AAIGC,QAAAA,OAAO,EAAE;AAJZ;;AAOH,SAAKR,UAAL;AACA,SAAKC,MAAL;AACGU,MAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACA,6CACMR,KADN;AAEGS,QAAAA,KAAK,EAAE,IAFV;AAGGN,QAAAA,eAAe,EAAE,KAHpB;AAIGC,QAAAA,OAAO,EAAE,KAJZ;AAKGC,QAAAA,IAAI,EAAE,IALT;AAMGK,QAAAA,KAAK,EAAET,MAAM,CAACK;AANjB;;AASH;AACG,aAAON,KAAP;AAnEN;AAqEF,CAtED","sourcesContent":["import {\n    REGISTER_SUCCESS,\n    REGISTER_FAIL,\n    USER_LOADED,\n    AUTH_ERROR,\n    LOGIN_SUCCESS,\n    LOGIN_FAIL,\n    LOGOUT,\n    CLEAR_ERRORS,\n    SET_CURRENT_USER\n } from \"../type\";\n \n export default (state, action) => {\n    switch (action.type) {\n       \n       case USER_LOADED:\n          return {\n             ...state,\n             isAuthenticated: true,\n             loading: false,\n             user: action.payload,\n          };\n \n       case AUTH_ERROR:\n          localStorage.removeItem(\"token\");\n          return {\n             ...state,\n             token: null,\n             loading: false,\n             user: null,\n             error: action.payload,\n          };\n \n       case REGISTER_SUCCESS:\n          localStorage.setItem(\"token\", action.payload.token);\n          return {\n             ...state,\n             ...action.payload, // the token\n             isAuthenticated: true,\n             loading: false,\n          };\n \n       case REGISTER_FAIL:\n          localStorage.removeItem(\"token\");\n          return {\n             ...state,\n             token: null,\n             loading: false,\n             user: null,\n             error: action.payload,\n          };\n \n       case CLEAR_ERRORS:\n          return {\n             ...state,\n             error: null,\n          };\n \n       case LOGIN_SUCCESS:\n          localStorage.setItem(\"token\", action.payload.token);\n          return {\n             ...state,\n             ...action.payload, // the token\n             isAuthenticated: true,\n             loading: false,\n          };\n \n       case LOGIN_FAIL:\n       case LOGOUT:\n          localStorage.removeItem(\"token\");\n          return {\n             ...state,\n             token: null,\n             isAuthenticated: false,\n             loading: false,\n             user: null,\n             error: action.payload,\n          };\n \n       default:\n          return state;\n    }\n };\n "]},"metadata":{},"sourceType":"module"}